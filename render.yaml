# render.yaml
services:
  - type: web
    name: django-commerce-prod  # Unique name for your service
    runtime: python
    pythonVersion: "3.10.6"  # Match your local Python version
    
    # Build commands
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
      python manage.py migrate
      python manage.py collectstatic --noinput
    
    # Startup command
    startCommand: gunicorn your_project.wsgi:application --workers 4
    
    # Environment variables
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: your_project.settings
      - key: SECRET_KEY
        generateValue: true  # Auto-generate secure key
      - key: DEBUG
        value: "False"  # Must be string "False" not boolean False
      - key: DISABLE_COLLECTSTATIC
        value: "0"
    
    # Database configuration
    database:
      name: django-commerce-db
      postgresVersion: "14"  
    
    # Health check
    healthCheckPath: /health/
    healthCheckTimeout: 180

databases:
  - name: django-commerce-db
    plan: free  # Or "starter" for production
    postgresVersion: "14"